import e from"../katex.mjs";const r={"(":"left parenthesis",")":"right parenthesis","[":"open bracket","]":"close bracket","\\{":"left brace","\\}":"right brace","\\lvert":"open vertical bar","\\rvert":"close vertical bar","|":"vertical bar","\\uparrow":"up arrow","\\Uparrow":"up arrow","\\downarrow":"down arrow","\\Downarrow":"down arrow","\\updownarrow":"up down arrow","\\leftarrow":"left arrow","\\Leftarrow":"left arrow","\\rightarrow":"right arrow","\\Rightarrow":"right arrow","\\langle":"open angle","\\rangle":"close angle","\\lfloor":"open floor","\\rfloor":"close floor","\\int":"integral","\\intop":"integral","\\lim":"limit","\\ln":"natural log","\\log":"log","\\sin":"sine","\\cos":"cosine","\\tan":"tangent","\\cot":"cotangent","\\sum":"sum","/":"slash",",":"comma",".":"point","-":"negative","+":"plus","~":"tilde",":":"colon","?":"question mark","'":"apostrophe","\\%":"percent"," ":"space","\\ ":"space","\\$":"dollar sign","\\angle":"angle","\\degree":"degree","\\circ":"circle","\\vec":"vector","\\triangle":"triangle","\\pi":"pi","\\prime":"prime","\\infty":"infinity","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\omega":"omega","\\theta":"theta","\\sigma":"sigma","\\lambda":"lambda","\\tau":"tau","\\Delta":"delta","\\delta":"delta","\\mu":"mu","\\rho":"rho","\\nabla":"del","\\ell":"ell","\\ldots":"dots","\\hat":"hat","\\acute":"acute"},a={prime:"prime",degree:"degrees",circle:"degrees",2:"squared",3:"cubed"},t={"|":"open vertical bar",".":""},o={"|":"close vertical bar",".":""},n={"+":"plus","-":"minus","\\pm":"plus minus","\\cdot":"dot","*":"times","/":"divided by","\\times":"times","\\div":"divided by","\\circ":"circle","\\bullet":"bullet"},s={"=":"equals","\\approx":"approximately equals","\u2260":"does not equal","\\geq":"is greater than or equal to","\\ge":"is greater than or equal to","\\leq":"is less than or equal to","\\le":"is less than or equal to",">":"is greater than","<":"is less than","\\leftarrow":"left arrow","\\Leftarrow":"left arrow","\\rightarrow":"right arrow","\\Rightarrow":"right arrow",":":"colon"},l={"\\underleftarrow":"left arrow","\\underrightarrow":"right arrow","\\underleftrightarrow":"left-right arrow","\\undergroup":"group","\\underlinesegment":"line segment","\\utilde":"tilde"},i=(e,a,l)=>{if(!e)return;let i;i="open"===a?e in t?t[e]:r[e]||e:"close"===a?e in o?o[e]:r[e]||e:"bin"===a?n[e]||e:"rel"===a?s[e]||e:r[e]||e,/^\d+$/.test(i)&&l.length>0&&/^\d+$/.test(l[l.length-1])?l[l.length-1]+=i:i&&l.push(i)},c=(e,r)=>{const a=[];e.push(a),r(a)},p=(e,r,t)=>{switch(e.type){case"accent":c(r,(r=>{u(e.base,r,t),r.push("with"),i(e.label,"normal",r),r.push("on top")}));break;case"accentUnder":c(r,(r=>{u(e.base,r,t),r.push("with"),i(l[e.label],"normal",r),r.push("underneath")}));break;case"accent-token":case"color-token":case"kern":case"leftright-right":case"size":case"infix":case"internal":break;case"atom":{const a=e.text;switch(e.family){case"bin":i(a,"bin",r);break;case"close":i(a,"close",r);break;case"inner":i(e.text,"inner",r);break;case"open":i(a,"open",r);break;case"punct":i(a,"punct",r);break;case"rel":i(a,"rel",r);break;default:throw e.family,new Error(`"${e.family}" is not a valid atom type`)}break}case"color":{const a=e.color.replace(/katex-/,"");c(r,(r=>{r.push("start color "+a),u(e.body,r,t),r.push("end color "+a)}));break}case"delimsizing":e.delim&&"."!==e.delim&&i(e.delim,"normal",r);break;case"genfrac":c(r,(r=>{const a=e.leftDelim,o=e.rightDelim;e.hasBarLine?(r.push("start fraction"),a&&i(a,"open",r),u(e.numer,r,t),r.push("divided by"),u(e.denom,r,t),o&&i(o,"close",r),r.push("end fraction")):(r.push("start binomial"),a&&i(a,"open",r),u(e.numer,r,t),r.push("over"),u(e.denom,r,t),o&&i(o,"close",r),r.push("end binomial"))}));break;case"leftright":c(r,(r=>{i(e.left,"open",r),u(e.body,r,t),i(e.right,"close",r)}));break;case"lap":case"ordgroup":case"raisebox":case"sizing":case"styling":case"smash":case"operatorname":case"font":case"html":u(e.body,r,t);break;case"mathord":i(e.text,"normal",r);break;case"op":{const a=e.body,o=e.name;a?u(a,r,t):o&&i(o,"normal",r);break}case"op-token":case"textord":i(e.text,t,r);break;case"overline":c(r,(function(r){r.push("start overline"),u(e.body,r,t),r.push("end overline")}));break;case"phantom":r.push("empty space");break;case"rule":r.push("rectangle");break;case"spacing":r.push("space");break;case"sqrt":c(r,(r=>{const a=e.body,o=e.index;if(o){return"3"===h(u(o,[],t)).join(",")?(r.push("cube root of"),u(a,r,t),void r.push("end cube root")):(r.push("root"),r.push("start index"),u(o,r,t),void r.push("end index"))}r.push("square root of"),u(a,r,t),r.push("end square root")}));break;case"supsub":{const o=e.base,n=e.sub,s=e.sup;let l=!1;if(o&&(u(o,r,t),l="op"===o.type&&"\\log"===o.name),n){const e=l?"base":"subscript";c(r,(function(r){r.push(`start ${e}`),u(n,r,t),r.push(`end ${e}`)}))}s&&c(r,(function(e){const r=h(u(s,[],t)).join(",");r in a?e.push(a[r]):(e.push("start superscript"),u(s,e,t),e.push("end superscript"))}));break}case"text":if("\\textbf"===e.font){c(r,(function(r){r.push("start bold text"),u(e.body,r,t),r.push("end bold text")}));break}c(r,(function(r){r.push("start text"),u(e.body,r,t),r.push("end text")}));break;case"enclose":if(/cancel/.test(e.label)){c(r,(function(r){r.push("start cancel"),u(e.body,r,t),r.push("end cancel")}));break}if(/box/.test(e.label)){c(r,(function(r){r.push("start box"),u(e.body,r,t),r.push("end box")}));break}if(/sout/.test(e.label)){c(r,(function(r){r.push("start strikeout"),u(e.body,r,t),r.push("end strikeout")}));break}throw new Error(`KaTeX-a11y: enclose node with ${e.label} not supported yet`);case"vphantom":throw new Error("KaTeX-a11y: vphantom not implemented yet");case"hphantom":throw new Error("KaTeX-a11y: hphantom not implemented yet");case"array":throw new Error("KaTeX-a11y: array not implemented yet");case"raw":throw new Error("KaTeX-a11y: raw not implemented yet");case"url":throw new Error("KaTeX-a11y: url not implemented yet");case"tag":throw new Error("KaTeX-a11y: tag not implemented yet");case"verb":i("start verbatim","normal",r),i(e.body,"normal",r),i("end verbatim","normal",r);break;case"environment":throw new Error("KaTeX-a11y: environment not implemented yet");case"horizBrace":i(`start ${e.label.slice(1)}`,"normal",r),u(e.base,r,t),i(`end ${e.label.slice(1)}`,"normal",r);break;case"includegraphics":throw new Error("KaTeX-a11y: includegraphics not implemented yet");case"href":throw new Error("KaTeX-a11y: href not implemented yet");case"cr":throw new Error("KaTeX-a11y: cr not implemented yet");case"underline":c(r,(function(r){r.push("start underline"),u(e.body,r,t),r.push("end underline")}));break;case"xArrow":throw new Error("KaTeX-a11y: xArrow not implemented yet");case"mclass":{const a=e.mclass.slice(1);u(e.body,r,a);break}case"mathchoice":u(e.text,r,t);break;case"htmlmathml":u(e.mathml,r,t);break;case"middle":i(e.delim,t,r);break;default:throw e.type,new Error("KaTeX a11y un-recognized type: "+e.type)}},u=function e(r,a,t){if(void 0===a&&(a=[]),r instanceof Array)for(let o=0;o<r.length;o++)e(r[o],a,t);else p(r,a,t);return a},h=function e(r){let a=[];return r.forEach((function(r){r instanceof Array?a=a.concat(e(r)):a.push(r)})),a};export default function(r,a){const t=e.__parse(r,a),o=u(t,[],"normal");return h(o).join(", ")}