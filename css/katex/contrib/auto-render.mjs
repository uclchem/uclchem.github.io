import e from"../katex.mjs";const t=function(e,t,r){let n=r,o=0;const a=e.length;for(;n<t.length;){const r=t[n];if(o<=0&&t.slice(n,n+a)===e)return n;"\\"===r?n++:"{"===r?o++:"}"===r&&o--,n++}return-1},r=function(e,r,n,o){const a=[];for(let s=0;s<e.length;s++)if("text"===e[s].type){const l=e[s].data;let i,d=!0,c=0;for(i=l.indexOf(r),-1!==i&&(c=i,a.push({type:"text",data:l.slice(0,c)}),d=!1);;){if(d){if(i=l.indexOf(r,c),-1===i)break;a.push({type:"text",data:l.slice(c,i)}),c=i}else{if(i=t(n,l,c+r.length),-1===i)break;a.push({type:"math",data:l.slice(c+r.length,i),rawData:l.slice(c,i+n.length),display:o}),c=i+n.length}d=!d}a.push({type:"text",data:l.slice(c)})}else a.push(e[s]);return a},n=function(t,n){const o=function(e,t){let n=[{type:"text",data:e}];for(let o=0;o<t.length;o++){const e=t[o];n=r(n,e.left,e.right,e.display||!1)}return n}(t,n.delimiters);if(1===o.length&&"text"===o[0].type)return null;const a=document.createDocumentFragment();for(let r=0;r<o.length;r++)if("text"===o[r].type)a.appendChild(document.createTextNode(o[r].data));else{const t=document.createElement("span");let l=o[r].data;n.displayMode=o[r].display;try{n.preProcess&&(l=n.preProcess(l)),e.render(l,t,n)}catch(s){if(!(s instanceof e.ParseError))throw s;n.errorCallback("KaTeX auto-render: Failed to parse `"+o[r].data+"` with ",s),a.appendChild(document.createTextNode(o[r].rawData));continue}a.appendChild(t)}return a},o=function e(t,r){for(let o=0;o<t.childNodes.length;o++){const a=t.childNodes[o];if(3===a.nodeType){const e=n(a.textContent,r);e&&(o+=e.childNodes.length-1,t.replaceChild(e,a))}else if(1===a.nodeType){const t=" "+a.className+" ";-1===r.ignoredTags.indexOf(a.nodeName.toLowerCase())&&r.ignoredClasses.every((e=>-1===t.indexOf(" "+e+" ")))&&e(a,r)}}};export default function(e,t){if(!e)throw new Error("No element provided to render");const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);r.delimiters=r.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],r.ignoredTags=r.ignoredTags||["script","noscript","style","textarea","pre","code","option"],r.ignoredClasses=r.ignoredClasses||[],r.errorCallback=r.errorCallback||console.error,r.macros=r.macros||{},o(e,r)}