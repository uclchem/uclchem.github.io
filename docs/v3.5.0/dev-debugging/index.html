<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v3.5.0 docs-doc-page docs-doc-id-dev-debugging" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Debugging | UCLCHEM</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://uclchem.github.io/img/undraw_online.svg"><meta data-rh="true" name="twitter:image" content="https://uclchem.github.io/img/undraw_online.svg"><meta data-rh="true" property="og:url" content="https://uclchem.github.io/docs/v3.5.0/dev-debugging"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v3.5.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v3.5.0"><meta data-rh="true" name="docsearch:version" content="v3.5.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v3.5.0"><meta data-rh="true" property="og:title" content="Debugging | UCLCHEM"><meta data-rh="true" name="description" content="UCLCHEM is a complex code and many things can go wrong. Here, we&#x27;ll list some of the things that often go wrong when you modify the code as well as a few helpful steps to trace down bugs."><meta data-rh="true" property="og:description" content="UCLCHEM is a complex code and many things can go wrong. Here, we&#x27;ll list some of the things that often go wrong when you modify the code as well as a few helpful steps to trace down bugs."><link data-rh="true" rel="icon" href="/img/uclchem-logo.jpg"><link data-rh="true" rel="canonical" href="https://uclchem.github.io/docs/v3.5.0/dev-debugging"><link data-rh="true" rel="alternate" href="https://uclchem.github.io/docs/v3.5.0/dev-debugging" hreflang="en"><link data-rh="true" rel="alternate" href="https://uclchem.github.io/docs/v3.5.0/dev-debugging" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://uclchem.github.io/docs/v3.5.0/category/developer"},{"@type":"ListItem","position":2,"name":"Debugging","item":"https://uclchem.github.io/docs/v3.5.0/dev-debugging"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="UCLCHEM RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="UCLCHEM Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-186542401-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css">
<script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/assets/css/styles.9999ee4d.css">
<script src="/assets/js/runtime~main.5f208fda.js" defer="defer"></script>
<script src="/assets/js/main.044c3537.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/uclchem-logo.jpg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/uclchem-logo.jpg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/uclchem-logo.jpg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">UCLCHEM</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">UCLCHEM</a><a class="navbar__item navbar__link" href="/3dpdr">3D-PDR</a><a class="navbar__item navbar__link" href="/emulators">Emulators</a><a class="navbar__item navbar__link" href="/ucl_pdr">UCLPDR</a><a class="navbar__item navbar__link" href="/uclchemcmc">UCLCHEMCMC</a><a class="navbar__item navbar__link" href="/othersoftware">Other</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/v3.5.0/dev-debugging">v3.5.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/dev-debugging">Develop ðŸš§</a></li><li><a class="dropdown__link" href="/docs/dev-debugging">v3.5.2</a></li><li><a class="dropdown__link" href="/docs/v3.5.1/dev-debugging">v3.5.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v3.5.0/dev-debugging">v3.5.0</a></li><li><a class="dropdown__link" href="/docs/v3.4.0/dev-debugging">v3.4.0</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/v3.5.0/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/v3.5.0/category/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v3.5.0/trouble-compile">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/v3.5.0/physics-core">Physics</a><button aria-label="Expand sidebar category &#x27;Physics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/v3.5.0/category/chemistry">Chemistry</a><button aria-label="Expand sidebar category &#x27;Chemistry&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/v3.5.0/category/developer">Developer</a><button aria-label="Collapse sidebar category &#x27;Developer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v3.5.0/dev-overview">Overview of the Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v3.5.0/dev-python-wrap">Writing The Python Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v3.5.0/dev-debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v3.5.0/dev-web">Maintaining the Website</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->UCLCHEM<!-- --> <b>v3.5.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/dev-debugging">latest version</a></b> (<!-- -->v3.5.2<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/v3.5.0/category/developer"><span>Developer</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Debugging</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3.5.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Debugging</h1></header><p>UCLCHEM is a complex code and many things can go wrong. Here, we&#x27;ll list some of the things that often go wrong when you modify the code as well as a few helpful steps to trace down bugs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="finding-the-error">Finding the error<a href="#finding-the-error" class="hash-link" aria-label="Direct link to Finding the error" title="Direct link to Finding the error">â€‹</a></h2>
<p>An unfortunate side effect of the python installation process and running the code in python is that underlying errors can go missing. If you get an error it is often best to go as close to the source as you can. That means compiling the code with the makefile and running it through a python script or, failing that, the binary.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="makefile">Makefile<a href="#makefile" class="hash-link" aria-label="Direct link to Makefile" title="Direct link to Makefile">â€‹</a></h3>
<p>You&#x27;ll find the source code and makefile in <code>src/fortran_src</code>, if you run</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd src/fortran_src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make clean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make python</span><br></span></code></pre></div></div>
<p>you&#x27;ll build the python wrap from scratch and you&#x27;ll get any compilation errors printed to screen directly. These compilation errors should print when <code>pip install .</code> fails but they can be lost in the python errors and often won&#x27;t be as helpfully coloured as the direct output from <code>make</code>. You can also go into the Makefile and change the compiler flags. Switching the optimization flags out for debugging flags will make the error easier to find. You&#x27;ll find them in the Makefile:</p>
<div class="language-makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-makefile codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Unforgiving debugging flags</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#FFLAGS =-g -fbacktrace -Wall -fcheck=all</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Fast optimizing flags</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FFLAGS = -O3 -fPIC -ffree-line-length-0</span><br></span></code></pre></div></div>
<p>where you simply switch over which <code>FFLAGS</code> is commented out.</p>
<p>You can also test for errors that come from the python interface by using <code>make</code> instead of <code>make python</code>. This will build a uclchem binary which you can simply run with the default parameters,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd src/fortran_src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ../../</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./uclchem CLOUD examples/phase1.inp</span><br></span></code></pre></div></div>
<p>Where phase1.inp is a parameter file written in a json like format and CLOUD is the type of model we&#x27;d like to run. Better yet, if you use the debugging flags to build this, you can run it in gdb.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">gdb uclchem</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">run CLOUD examples/phase1.inp</span><br></span></code></pre></div></div>
<p>We can&#x27;t go into detail on gdb is here but it&#x27;s a terminal based debugger that can be used to trace down the error. It will often let you look at values of variables at the point where the code broke and give more information than the standard fortran outputs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="python">Python<a href="#python" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">â€‹</a></h3>
<p>It&#x27;s mentioned at several points in the docs but if you habitually run your UCLCHEM codes in jupyter notebooks, you&#x27;ll find that error messages are often hidden from you. Any debugging should really be done via python script.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="non-fatal-errors">Non-fatal errors<a href="#non-fatal-errors" class="hash-link" aria-label="Direct link to Non-fatal errors" title="Direct link to Non-fatal errors">â€‹</a></h2>
<p>Many errors will not stop the code compiling but are catastrophic. For example, you could introduce a new procedure that is valid Fortran but does not do what you want it to do. In these cases, you&#x27;ll have to hunt the problem down yourself. We recommend running the test cases in <code>scripts/run_uclchem_tests.py</code> and comparing the output to the ones in the example using the plot created by <code>scripts/plot_uclchem_tests.py</code>. Sometimes, they&#x27;ll be different because you introduced a change that you know will effect the chemistry. For example, you might have changed a desorption process and find the ice abundances change which is totally fine. However, if you see a change that is unexpected, you can investigate.</p>
<p>There&#x27;s no better way to debug these errors than to simply print a lot of things to screen. It can seem silly but adding a bunch of write statements to your code is often the fastest way to track down what is going wrong.</p>
<div class="language-fortran codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-fortran codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">IF (myParam .gt. criticalValue) THEN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    write(*,*) &quot;here!&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    !do stuff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ELSE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    write(*,*) &quot;if not trigged because myParam is&quot;, myParam</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    !do other stuff</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">END IF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">!do some processing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CALL myNewSubroutine</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">write(*,*) &quot;myParam&quot;, myParam, &quot;at code point x&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Additions to the code like above will check the logic of your code is going the way you expect and that parameters aren&#x27;t taking surprise values. If you have absolutely no suspicions about which part of your code is going wrong, you can use the subroutine <code>simpleDebug</code> which is in the IO module (<code>io.f90</code>). That prints a statement of your choice as well as many of the parameters.</p>
<div class="language-fortran codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-fortran codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">!do some processing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CALL myNewSubroutine</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CALL simpleDebug(&quot;Param values after myNewSubroutine&quot;)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-error-sources">Common Error Sources<a href="#common-error-sources" class="hash-link" aria-label="Direct link to Common Error Sources" title="Direct link to Common Error Sources">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="variable-reset">Variable Reset<a href="#variable-reset" class="hash-link" aria-label="Direct link to Variable Reset" title="Direct link to Variable Reset">â€‹</a></h3>
<p>If you notice errors that only occur when you run the code more than once in a python script, then a common source is the initial value that variables take in the code. Variable initialization done at the declaration stage of a module only happens once. That is why the vast majority of variables that are not fortran parameters (constants) are set to an initial value by defaultparameters.f90 or in the initialization subroutines of the physics-core, chemistry, and physics modules.</p>
<p>It&#x27;s very common when editing the code or adding new variables to forget to do this and then to see unusual behaviour when you run multiple models in a row in python.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-11T14:50:08.000Z" itemprop="dateModified">Jul 11, 2025</time></b> by <b>Gijs VermariÃ«n</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v3.5.0/dev-python-wrap"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Writing The Python Interface</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/v3.5.0/dev-web"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Maintaining the Website</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#finding-the-error" class="table-of-contents__link toc-highlight">Finding the error</a><ul><li><a href="#makefile" class="table-of-contents__link toc-highlight">Makefile</a></li><li><a href="#python" class="table-of-contents__link toc-highlight">Python</a></li></ul></li><li><a href="#non-fatal-errors" class="table-of-contents__link toc-highlight">Non-fatal errors</a></li><li><a href="#common-error-sources" class="table-of-contents__link toc-highlight">Common Error Sources</a><ul><li><a href="#variable-reset" class="table-of-contents__link toc-highlight">Variable Reset</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/uclchem-logo.jpg" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/uclchem-logo.jpg" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright Â© 2023 Leiden University</div></div></div></footer></div>
</body>
</html>