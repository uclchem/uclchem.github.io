<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="UCLCHEM Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="UCLCHEM Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-186542401-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Python API | UCLCHEM</title><meta data-react-helmet="true" property="og:url" content="https://uclchem.github.io/docs/pythonapi"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Python API | UCLCHEM"><meta data-react-helmet="true" name="description" content="The .so or .dll object created by make python can be directly imported into a python script. However, for convenience, we suggest you import it through the uclchem module provided with the code. This provides convenient functions to call UCLCHEM, each of which are detailed below."><meta data-react-helmet="true" property="og:description" content="The .so or .dll object created by make python can be directly imported into a python script. However, for convenience, we suggest you import it through the uclchem module provided with the code. This provides convenient functions to call UCLCHEM, each of which are detailed below."><meta data-react-helmet="true" property="og:image" content="https://uclchem.github.io/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://uclchem.github.io/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/uclchem-logo.jpg"><link data-react-helmet="true" rel="canonical" href="https://uclchem.github.io/docs/pythonapi"><link data-react-helmet="true" rel="alternate" href="https://uclchem.github.io/docs/pythonapi" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://uclchem.github.io/docs/pythonapi" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.94080cdd.css">
<link rel="preload" href="/assets/js/runtime~main.1b81c32a.js" as="script">
<link rel="preload" href="/assets/js/main.7a4240a8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">UCLCHEM</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">UCLCHEM</a><a class="navbar__item navbar__link" href="/3dpdr">3D-PDR</a><a class="navbar__item navbar__link" href="/ucl_pdr">UCLPDR</a><a class="navbar__item navbar__link" href="/othersoftware">Other</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">UCLCHEM</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">UCLCHEM</a></li><li class="menu__list-item"><a class="menu__link" href="/3dpdr">3D-PDR</a></li><li class="menu__list-item"><a class="menu__link" href="/ucl_pdr">UCLPDR</a></li><li class="menu__list-item"><a class="menu__link" href="/othersoftware">Other</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Basic Use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/network">Creating a Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/parameters">Model Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trouble">Troubleshooting</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Python</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pythoncompiling">Compiling for Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pythonstart">Running Your First Models</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/pythonapi">Python API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Physics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/physics">Physics Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cloud">Cloud Core Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shocks">Shock Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/collapse">Collapse Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hydro">Hydro Post Processing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Chemistry</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gas">Gas Phase Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/grain">Grain Surface Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/desorb">Adsorption &amp; Desorption Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bulk">Bulk Ice Processes</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Python API</h1></header><div class="markdown"><p>The .so or .dll object created by <code>make python</code> can be directly imported into a python script. However, for convenience, we suggest you import it through the uclchem module provided with the code. This provides convenient functions to call UCLCHEM, each of which are detailed below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run_model"></a>run_model<a class="hash-link" href="#run_model" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">run_model</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">param_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Run UCLCHEM using variables taking from a dictionary of parameter values. Any parameter
not included in the dictionary will be taken from defaultparameters.f90.</p><p><strong>Arguments</strong>:</p><ul><li><code>param_dict</code>: A dictionary of parameters where keys are any of the variables in
defaultparameters.f90 and values are value for current run.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run_model_for_abundances"></a>run_model_for_abundances<a class="hash-link" href="#run_model_for_abundances" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">run_model_for_abundances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">param_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Run UCLCHEM, returning the abundances of up to 50 species at the end of the run. The species are taken from the outSpecies list provided in <code>param_dict</code>. This function will still write to file in addition to returning abundances if <code>outFile</code> or <code>columnFile</code> is provided.</p><p><strong>Arguments</strong>:</p><ul><li><code>param_dict</code>: A dictionary of parameters where keys are any of the variables in
defaultparameters.f90 and values are value for current run.</li></ul><p><strong>Returns</strong>:</p><ul><li>An array containing the final abundances of each species in <code>outSpecies</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get_species_rates"></a>get_species_rates<a class="hash-link" href="#get_species_rates" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">get_species_rates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">param_dict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> input_abundances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reac_indxs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Get the rate of up to 500 reactions from UCLCHEM for a given set of parameters and abundances.
Intended for use within the analysis script and not for direct use.</p><p><strong>Arguments</strong>:</p><ul><li><code>param_dict</code>: A dictionary of parameters where keys are any of the variables in
defaultparameters.f90 and values are value for current run.</li><li><code>input_abundances</code>: Abundance of every species in network</li><li><code>reac_indxs</code>: Index of reactions of interest in the network&#x27;s reaction list.</li></ul><p><strong>Returns</strong>:</p><ul><li>An array containing the rates of every reaction in <code>reac_indxs</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="read_output_file"></a>read_output_file<a class="hash-link" href="#read_output_file" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">read_output_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">output_file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Read the output of a UCLCHEM run created with the outputFile parameter into a pandas DataFrame</p><p><strong>Arguments</strong>:</p><ul><li><code>output_file</code>: - path to file containing a full UCLCHEM output</li></ul><p><strong>Returns</strong>:</p><ul><li>A pandas DataFrame with one row per timestep, several cloud parameters such as temperature and the abundance of every species.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create_abundance_plot"></a>create_abundance_plot<a class="hash-link" href="#create_abundance_plot" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">create_abundance_plot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">df</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> species</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> plot_file</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">None</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Produce a plot of the abundances of chosen species through time, returning the pyplot
figure and axis objects</p><p><strong>Arguments</strong>:</p><ul><li><code>df</code>: A dataframe created by <code>read_output_file</code></li><li><code>species</code>: A list of species names to be plotted</li><li><code>plot_file</code>: optional argument with path to file where the plot should be saved</li></ul><p><strong>Returns</strong>:</p><ul><li>fig: a matplotlib figure object</li><li>axis: a matplotlib axis</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="plot_species"></a>plot_species<a class="hash-link" href="#plot_species" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">plot_species</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ax</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> df</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> species</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Plot the abundance of several species through time onto an existing pyplot axis</p><p><strong>Arguments</strong>:</p><ul><li><code>ax</code>: pyplot axis on which to plot</li><li><code>df</code>: A dataframe created by :func:<code>read_output_file</code></li><li><code>species</code>: A list of species names to be plotted</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="param_dict_from_output"></a>param_dict_from_output<a class="hash-link" href="#param_dict_from_output" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">param_dict_from_output</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">output_line</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Generate a parameter dictionary with enough variables to correctly estimate the rates of
reactions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get_rates_of_change"></a>get_rates_of_change<a class="hash-link" href="#get_rates_of_change" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">get_rates_of_change</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rates</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> reactions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> speciesList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> species</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Calculate the terms in the rate of equation of a particular species using rates calculated using
get_species_rates() and a row from the full output of UCLCHEM.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-05-24T14:49:38.000Z" class="lastUpdatedDate_1WI_">5/24/2021</time> by <strong>jonholdship</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/pythonstart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Running Your First Models</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/physics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Physics Modules Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#run_model" class="table-of-contents__link">run_model</a></li><li><a href="#run_model_for_abundances" class="table-of-contents__link">run_model_for_abundances</a></li><li><a href="#get_species_rates" class="table-of-contents__link">get_species_rates</a></li><li><a href="#read_output_file" class="table-of-contents__link">read_output_file</a></li><li><a href="#create_abundance_plot" class="table-of-contents__link">create_abundance_plot</a></li><li><a href="#plot_species" class="table-of-contents__link">plot_species</a></li><li><a href="#param_dict_from_output" class="table-of-contents__link">param_dict_from_output</a></li><li><a href="#get_rates_of_change" class="table-of-contents__link">get_rates_of_change</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/uclchem-logo.jpg" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/uclchem-logo.jpg" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 Jon Holdship</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1b81c32a.js"></script>
<script src="/assets/js/main.7a4240a8.js"></script>
</body>
</html>