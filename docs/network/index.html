<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="UCLCHEM Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="UCLCHEM Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-186542401-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Creating a Network | UCLCHEM</title><meta data-react-helmet="true" property="og:url" content="https://uclchem.github.io/docs/network"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Creating a Network | UCLCHEM"><meta data-react-helmet="true" name="description" content="MakeRates"><meta data-react-helmet="true" property="og:description" content="MakeRates"><meta data-react-helmet="true" property="og:image" content="https://uclchem.github.io/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://uclchem.github.io/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/uclchem-logo.jpg"><link data-react-helmet="true" rel="canonical" href="https://uclchem.github.io/docs/network"><link data-react-helmet="true" rel="alternate" href="https://uclchem.github.io/docs/network" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://uclchem.github.io/docs/network" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.94080cdd.css">
<link rel="preload" href="/assets/js/runtime~main.ff800e08.js" as="script">
<link rel="preload" href="/assets/js/main.7a4240a8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">UCLCHEM</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">UCLCHEM</a><a class="navbar__item navbar__link" href="/3dpdr">3D-PDR</a><a class="navbar__item navbar__link" href="/ucl_pdr">UCLPDR</a><a class="navbar__item navbar__link" href="/othersoftware">Other</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/uclchem-logo.jpg" alt="UCLCHEM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">UCLCHEM</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">UCLCHEM</a></li><li class="menu__list-item"><a class="menu__link" href="/3dpdr">3D-PDR</a></li><li class="menu__list-item"><a class="menu__link" href="/ucl_pdr">UCLPDR</a></li><li class="menu__list-item"><a class="menu__link" href="/othersoftware">Other</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Basic Use</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/network">Creating a Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/parameters">Model Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trouble">Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Python</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pythoncompiling">Compiling for Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pythonstart">Running Your First Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pythonapi">Table of Contents</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Physics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/physics">Physics Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cloud">Cloud Core Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shocks">Shock Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/collapse">Collapse Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/hydro">Hydro Post Processing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Chemistry</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gas">Gas Phase Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/grain">Grain Surface Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/desorb">Adsorption &amp; Desorption Reactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bulk">Bulk Ice Processes</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Creating a Network</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="makerates"></a>MakeRates<a class="hash-link" href="#makerates" title="Direct link to heading">#</a></h2><p>In order to make a chemical model flexible, the ability to solve a user supplied chemical network is a must. UCLCHEM uses a preprocessing python script to turn csv lists of species and reactions into fortran files for use in the main code. This script is called MakeRates and can be found in a subdirectory of the repository. It combines a gas phase reaction database with user supplied lists of species and additional reactions into odes.f90 and network.f90 which contain all necessary information. It also supplies a number of human readable outputs.</p><p><strong>Any output from MakeRates requires that the code be recompiled from scratch (make clean, then make)</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inputs"></a>Inputs<a class="hash-link" href="#inputs" title="Direct link to heading">#</a></h2><p>Inputs for MakeRates can be found in <code>MakeRates/inputFiles/</code> and the specific files used by MakeRates can be changed in <code>MakeRates/MakeRates.py</code>. MakeRates requires three inputs:</p><ul><li>A species list containing all species and their properties</li><li>A gas phase reaction database in UMIST or KIDA formats</li><li>A user supplied reaction database including all freeze out reactions at a minimum</li></ul><p>A basic version of each of these is supplied with UCLCHEM include KIDA2014 and UMIST12. <strong>We do not endorse the resulting network</strong>, we have simply produced a grain surface network that was relatively up to date in 2018. It produces reasonable ice mantle abundances for major species and ignores larger COMs.  We strongly suggest any published work be based on a network in which the user has confidence. However, where the user is not greatly concerned with grain surface chemistry, the default network is a good starting point.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="outputs"></a>Outputs<a class="hash-link" href="#outputs" title="Direct link to heading">#</a></h2><p>Outputs from MakeRates can be found in <code>MakeRates/outputFiles/</code> and must be copied to <code>src</code> to be included in UCLCHEM. They include:</p><ul><li>Network.f90 - Fortran arrays containing lists of species names and properties (mass, binding energy etc) as well as reaction reactants, products and rate coefficients.</li><li>odes.f90 - Code to calculate the rate of change of each species&#x27; abundance for the numerical solver</li><li>species.csv - A list of all species in the network and their properties. Made for humans not UCLCHEM.</li><li>reactions.csv - A list of all reactions including reactants, products and coefficients. Made for humans not UCLCHEM.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="what-makerates-does"></a>What MakeRates Does<a class="hash-link" href="#what-makerates-does" title="Direct link to heading">#</a></h2><p>MakeRates does the following:</p><ul><li>Combines the two input reaction lists</li><li>Filters to remove any reactions containing species not in the input species list</li><li>Checks all species freeze out</li><li>Adds non-thermal desorption reactions for all frozen species</li><li>Does basic network consistency checks and alerts user of problems</li><li>Writes fortran files for UCLCHEM</li><li>Writes other output files</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-your-own-network"></a>Creating your own Network<a class="hash-link" href="#creating-your-own-network" title="Direct link to heading">#</a></h2><p>To create your own network you need to produce a species list and a reaction list.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="species-list"></a>Species list<a class="hash-link" href="#species-list" title="Direct link to heading">#</a></h5><p>The species list should simply be a list with one row per species in the network. Each row should contain the species name, mass, binding energy and enthalpy. The latter two are only used for surface species so can be set to zero for the gas phase species. MakeRates will check the mass is correct for each species and alert you of discrepancies.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reaction-list"></a>Reaction list<a class="hash-link" href="#reaction-list" title="Direct link to heading">#</a></h5><p>The second reaction list is intended to contain your surface network but can also be used to augment the gas phase databases by including additional gas phase reactions. The reaction list should be a list with one row per reaction and each row should be a comma separated list of 3 reactants, 4 products, three coefficients (alpha,beta,gamma) and a minimum and maximum temperature. Any missing values such as a third reactant can be left blank. In particular, the temperatures are optional but you can including multiple versions of the same reaction and UCLCHEM will only use each one within its specified temperature range if included.</p><p>The third reactant can be used as a keyword to tell MakeRates what kind of reaction is occuring. In the absence of a keyword, MakeRates and UCLCHEM will treat any reaction as a gas-phase two body reaction. Two keywords the user may wish to use are ER and LH for Eley-Rideal and Langmuir-Hinshelwood reactions respectively (see <a href="/docs/grain/">Grain Chemisty</a>). If LH is not added, UCLCHEM will assume a reaction between two surface reactions follows a  Kooji-Arrhenius equation.</p><p>For every species, the user reaction file should contain at least one freeze out route. This plus UMIST12 is the minimum possible reaction network. Some users may wish to freeze a species out as something other than itself and so MakeRates does not automatically add these reactions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="three-phase-chemistry"></a>Three Phase Chemistry<a class="hash-link" href="#three-phase-chemistry" title="Direct link to heading">#</a></h2><p>Whilst not strictly an input, there is a flag in <code>MakeRates.py</code> called <code>three_phase</code>. If this is set to true, the chemical network will have gas, grain surface, and bulk ice chemistry. If it set to false, the ice mantles will be treated as a single phase. </p><p>When true, MakeRates will create the bulk ice chemistry by adding a bulk version of each species with a binding energy equal to the H2O binding energy. It will also duplicate all LH reactions so they take place in the bulk and it will add terms to the ODEs to allow transfer between the bulk and the surface. See the chemistry sections for more information.</p><p>You can override the binding energy of material in the bulk by explicitly including the bulk species in your species file rather than allowing MakeRates to automatically add it. Bulk species are designated with an &quot;@&quot;. For example, &quot;H2O&quot; is gas phase H<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow></mrow><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.45110799999999995em;vertical-align:-0.15em"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>O, &quot;#H2O&quot; is surface H<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow></mrow><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.45110799999999995em;vertical-align:-0.15em"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>O and &quot;@H2O&quot; is H<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow></mrow><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.45110799999999995em;vertical-align:-0.15em"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>O in the bulk.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-05-24T14:49:38.000Z" class="lastUpdatedDate_1WI_">5/24/2021</time> by <strong>jonholdship</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Basic Use</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/parameters"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Model Parameters Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#makerates" class="table-of-contents__link">MakeRates</a></li><li><a href="#inputs" class="table-of-contents__link">Inputs</a></li><li><a href="#outputs" class="table-of-contents__link">Outputs</a></li><li><a href="#what-makerates-does" class="table-of-contents__link">What MakeRates Does</a></li><li><a href="#creating-your-own-network" class="table-of-contents__link">Creating your own Network</a></li><li><a href="#three-phase-chemistry" class="table-of-contents__link">Three Phase Chemistry</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/uclchem-logo.jpg" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/uclchem-logo.jpg" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 Jon Holdship</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ff800e08.js"></script>
<script src="/assets/js/main.7a4240a8.js"></script>
</body>
</html>